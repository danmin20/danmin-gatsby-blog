---
emoji: ğŸ“¦
title: 'ë²ˆë“¤ëŸ¬ê°€ RSCë¥¼ ì§€ì›í•œë‹¤ê³ ? Parcelê³¼ í•¨ê»˜í•˜ëŠ” SSR'
date: '2025-04-24'
categories: Dev
---

[Parcel v2.14](https://parceljs.org/blog/v2-14-0)ê°€ React Server Componentsë¥¼ ì§€ì›í•˜ê¸° ì‹œì‘í–ˆë‹¤!

ğŸ™„ **"ì•„ë‹ˆ, Parcelì€ ë²ˆë“¤ëŸ¬ì§€, í”„ë ˆì„ì›Œí¬ê°€ ì•„ë‹ˆì§€ ì•Šë‚˜ìš”?"**

ê·¸ê²ƒì´ ë°”ë¡œ ë„ˆë¬´ë‚˜ë„ í¥ë¯¸ë¡œìš´ ì ì´ë‹¤! íŒŒì…€ì€ í”„ë ˆì„ì›Œí¬ê°€ ì•„ë‹Œ, ì²« ë²ˆì§¸ RSC ì§€ì› íˆ´ì´ ëœ ê²ƒì´ë‹¤.
ê·¸ ë§ì¸ ì¦‰ìŠ¨, ì´ì œ ë¬´ê±°ìš´ ì…‹ì—…ì„ ë’¤ë¡œ í•˜ê³  ë¡œìš°ë ˆë²¨ë¶€í„° ê°€ë²¼ìš´ ë¸”ë¡ì„ ìŒ“ë“¯ì´ RSCë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¼ê³  í•˜ë‹ˆ ë¬´ì¡°ê±´ ì„œë²„ì—ì„œ HTMLë¡œ ë Œë”ë§ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì¸ ê²ƒìœ¼ë¡œ ì˜¤í•´í•  ìˆ˜ ìˆëŠ”ë°,  
ê·¸ë ‡ì§€ ì•Šë‹¤!

React Server ComponentsëŠ” ê¸°ì¡´ì˜ í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ ë°©ì‹ì˜ SPA(Single Page Application)ì— í†µí•©í•  ìˆ˜ ìˆë‹¤.
API ì„œë²„ì—ì„œ JSONì„ ë°›ëŠ” ëŒ€ì‹  ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•œë‹¤ë©´, ìš”ì²­ëœ ë°ì´í„°ë¥¼ ë Œë”ë§í•˜ëŠ” ë° í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë§Œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ëƒ„ìœ¼ë¡œì¨ í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ì˜ í¬ê¸°ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

ì„œë²„ì—ì„œëŠ” RSC payloadë§Œì„ ì „ë‹¬í•˜ê³ , ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë Œë”ë§í•  ìˆ˜ë„ ìˆê³ ,
ì„œë²„ì—ì„œ ì˜¨ì „íˆ HTMLì„ ë Œë”ë§í•  ìˆ˜ë„ ìˆëŠ” ê²ƒì´ë‹¤.

&nbsp;

## Parcelê³¼ í•¨ê»˜ React Server Componentsë¥¼ í™œìš©í•´ë³´ì!

ìš°ì„ ì€ ì˜ì¡´ì„±ë¶€í„° ì„¤ì¹˜í•´ë³´ì!

```bash
npm install react react-dom @parcel/rsc
```
> ë¦¬ì•¡íŠ¸ ë²„ì „ì€ 19 ì´ìƒì´ì–´ì•¼ í•œë‹¤.

![](6.png)
> ë¬¼ë¡  ì´ ë‚´ìš©ì€ 19ì„¸ ë¯¸ë§Œì˜ ì²­ì†Œë…„ë„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤..ğŸ¤—

&nbsp;

## Client Rendering

í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.

&nbsp;

### 1. íƒ€ê²Ÿ ì„¸íŒ…í•˜ê¸°

ìš°ì„ , package.jsonì— ë‘ [íƒ€ê²Ÿ](https://parceljs.org/features/targets/)ì„ ë§Œë“¤ì.
í•˜ë‚˜ëŠ” ì•±ì˜ ê¸°ì¡´ index.htmlì„ ê°€ë¦¬í‚¤ëŠ” í´ë¼ì´ì–¸íŠ¸ íƒ€ê²Ÿ,
ë˜ ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ì„œë²„ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì„œë²„ íƒ€ê²Ÿì´ë‹¤.

```json
// package.json

{
  "client": "dist/index.html",
  "server": "dist/server.js",
  "targets": {
    "client": {
      "source": "src/index.html",
      "context": "react-client"
    },
    "server": {
      "source": "server/server.js",
      "context": "react-server"
    }
  },
  "scripts": {
    "start": "parcel",
    "build": "parcel build"
  }
}
```

&nbsp;

### 2. ì„œë²„ ë§Œë“¤ê¸°

Node.jsë¼ë©´ ë­ë“ ì§€ ì‚¬ìš©í•´ë„ ëœë‹¤!
í•˜ì§€ë§Œ ë­ë‹ˆë­ë‹ˆí•´ë„ ì œì¼ ê°„ë‹¨í•œ ê²ƒì€ Expressë‹ˆê¹Œ..

```js
// server/server.tsx

import express from "express";

const app = express();

app.use(function (req, res, next) {
  res.setHeader("Access-Control-Allow-Methods", "GET,HEAD,POST");
  res.setHeader("Access-Control-Allow-Origin", "*");
  res.setHeader("Access-Control-Allow-Headers", "rsc-action");
  next();
});

app.listen(3000);
console.log("Server listening on port 3000");
```

&nbsp;

### 3. ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

&nbsp;

#### 3-1. í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

ë‹¹ì—°íˆ ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ importí•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ë¦¬ì•¡íŠ¸ í›…ì´ë¼ë“ ê°€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ìˆìœ¼ë‹ˆ ë§ì´ë‹¤.

React ì§€ì‹œì–´ "use client"ë¥¼ ì‚¬ìš©í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
ê°„ë‹¨í•œ ì¹´ìš´í„° ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì!

```tsx
// server/Counter.tsx

"use client";

import { useState } from "react";

export function Counter() {
  let [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>Count: {count}</button>;
}
```

&nbsp;

#### 3-2. ì„œë²„ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

ê·¸ë¦¬ê³  Counterë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì.

```tsx
// server/RSC.tsx

"use server-entry";

import { Counter } from "./Counter";
import "./RSC.css";

export async function RSC() {
  return (
    <div className="rsc">
      <h2>RSC!</h2>
      <Counter />
    </div>
  );
}
```

ì˜ˆì œì—ì„œëŠ” ë‹¨ìˆœ í…ìŠ¤íŠ¸ë§Œì„ ë Œë”ë§í•˜ê³  ìˆì§€ë§Œ,
ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì´ê¸°ì— íŒŒì¼ ì‹œìŠ¤í…œì´ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ ê°™ì€ ì„œë²„ ìì›ì—ë„ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

"use server-entry"ëŠ” Parcel ë²ˆë“¤ëŸ¬ ì§€ì‹œì–´ë¡œ, í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜ì´ì§€ ë˜ëŠ” ë¼ìš°íŠ¸ì˜ **ì§„ì…ì (entry point)** ìœ¼ë¡œ í‘œì‹œí•œë‹¤.
ì´ ì§€ì‹œì–´ëŠ” ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ê²½ê³„ë¥¼ ë§Œë“¤ì–´ì£¼ë©°, í•´ë‹¹ ë¼ìš°íŠ¸ì—ì„œ ì°¸ì¡°ë˜ëŠ” ëª¨ë“  ì˜ì¡´ì„±(Client Components, CSS ë“±)ì„ ìµœì ì˜ ë°©ì‹ìœ¼ë¡œ ë²ˆë“¤ë§í•œë‹¤.
(ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ê³µìœ ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°™ì€ ê³µí†µ ì˜ì¡´ì„±ì€ ìë™ìœ¼ë¡œ ê³µìœ  ë²ˆë“¤ë¡œ ë¶„ë¦¬ë˜ì–´ ì¤‘ë³µì„ ì¤„ì—¬ì¤€ë‹¤.)

ì´ì œ ì„œë²„ì—ì„œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ RSC payloadë¡œ ë Œë”ë§í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì£¼ì.
(ì²˜ìŒ í˜ì´ì§€ë¥¼ ì—´ ë•Œ ë¸Œë¼ìš°ì €ê°€ ì§ì ‘ ì•±ì„ ë Œë”ë§í•˜ê¸° ë•Œë¬¸ì—, ì„œë²„ì—ì„œ ë¯¸ë¦¬ HTMLì„ ë§Œë“¤ì–´ì„œ ë³´ë‚´ì¤„ í•„ìš”ê°€ ì—†ë‹¤.)

```tsx
app.get("/", async (req, res) => {
  let stream = renderRSC(<RSC />);
  res.set("Content-Type", "text/x-component");
  stream.pipe(res);
});
```

&nbsp;

### ì‹¤í–‰ ê²°ê³¼

í•œ ë²ˆ ì‹¤í–‰ì‹œì¼œë³´ë©´,

![](0.png)
Suspenseë„ ì˜ ë™ì‘í•˜ê³ ,

![](1.png)
ì»´í¬ë„ŒíŠ¸ë„ ì•„ì£¼ ì˜ ë Œë”ë§ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤!

![](3.png)
í•˜ì§€ë§Œ ì–´ì¨Œê±°ë‚˜ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë Œë”ë§ì´ ë˜ê¸° ë•Œë¬¸ì—, ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë„ë©´ ì•„ë¬´ê²ƒë„ ë Œë”ë§ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

&nbsp;

## Server Rendering

ê·¸ë ‡ë‹¤ë©´ ì •ë§ë¡œ ì„œë²„ì—ì„œ RSCë¥¼ ë Œë”ë§í•´ë³´ì.

RSCì™€ Parcelì„ ì‚¬ìš©í•´ì„œ ì„œë²„ ë Œë”ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ê³ ì í•œë‹¤ë©´, ì•„ë˜ì˜ ì»¤ë§¨ë“œë¥¼ í™œìš©í•˜ì—¬ í€µ ìŠ¤íƒ€íŠ¸ë¥¼ í•  ìˆ˜ë„ ìˆë‹¤.

```bash
npm create parcel react-server my-rsc-app
```

&nbsp;

### 1. ì„œë²„ ë§Œë“¤ê¸°

```json
{
  "server": "dist/server.js",
  "targets": {
    "server": {
      "source": "src/server.tsx",
      "context": "react-server",
      "includeNodeModules": {
        "express": false
      }
    }
  },
  "scripts": {
    "start": "parcel",
    "build": "parcel build"
  },
}
```

```js
// src/server.tsx

import express from "express";
import { renderRequest } from "@parcel/rsc/node";

import { RSC } from "./RSC";

const app = express();

app.use(express.static("dist"));

app.get("/", async (req, res) => {
  await renderRequest(req, res, <RSC />, { component: RSC });
});

app.listen(3000);
console.log("Server listening on port 3000");
```

ì´ì „ì˜ ì½”ë“œì™€ ìœ ì‚¬í•´ë³´ì´ì§€ë§Œ, renderRSC ëŒ€ì‹  @parcel/rscì˜ renderRequestë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤.
ì´ í•¨ìˆ˜ëŠ” RSC payload ëŒ€ì‹  HTMLì„ ë Œë”ë§í•œë‹¤.
ì„œë²„ ì—”íŠ¸ë¦¬ëŠ” í˜ì´ì§€ì˜ ë£¨íŠ¸ \<html> ìš”ì†Œë¥¼ ë Œë”ë§í•˜ê²Œ ëœë‹¤.

&nbsp;

### 2. Hydration

ì„œë²„ì—ì„œ ë Œë”ë§ëœ ì •ì ì¸ HTMLì„ ìœ ì €ê°€ ì‹¤ì œë¡œ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¸Œë¼ìš°ì €ì—ì„œ í˜ì´ì§€ë¥¼ hydrationí•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤.
ì´ë•Œ Parcel ì§€ì‹œì–´ "use client-entry"ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤.

ì´ ì§€ì‹œì–´ëŠ” Parcelì—ê²Œ ì´ íŒŒì¼ì´ ì„œë²„ê°€ ì•„ë‹ˆë¼ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ë©°,
í˜ì´ì§€ê°€ ë¡œë“œë˜ìë§ˆì ì‹¤í–‰í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì¤€ë‹¤.

@parcel/rsc/client ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ hydrateë¥¼ ì‚¬ìš©í•´ì„œ í˜ì´ì§€ë¥¼ hydration í•´ì£¼ì.
(ì´ë•Œ ë°ì´í„°ëŠ” ì„œë²„ì˜ @parcel/rsc/nodeê°€ HTMLì— ì£¼ì…í•œ ê²ƒì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.)

```ts
// src/client.ts

"use client-entry";

import { hydrate } from "@parcel/rsc/client";

hydrate();
```

ì‹¤ì§ˆì ìœ¼ë¡œ SSRë˜ëŠ” í˜ì´ì§€ ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹ íŒŒì¼ì„ importí•´ì£¼ë©´ ëœë‹¤.

```tsx
// src/RSC.tsx

"use server-entry";

import { Counter } from "./Counter";
import "./RSC.css";
import "./client"; // ìƒˆë¡œ ì¶”ê°€ëœ ë¼ì¸

export async function RSC() {
  return (
    <div className="rsc">
      <h2>RSC!</h2>
      <Counter />
    </div>
  );
}
```

&nbsp;

### ì‹¤í–‰ ê²°ê³¼

![](4.png)

ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ë„ ì˜ ë˜ê³ , í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë™ì‘ë„ ì˜ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤!

![](5.png)

ë¸Œë¼ìš°ì €ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë„ë©´, ë Œë”ë§ì€ ì˜ ë˜ì§€ë§Œ Counter ê¸°ëŠ¥ì€ ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

&nbsp;

ì´ì œê» Next.jsë¡œë§Œ RSCì™€ SSRì„ ì‚¬ìš©í–ˆì—ˆëŠ”ë°, ì´ë ‡ê²Œ ë²ˆë“¤ëŸ¬ ì°¨ì›ì—ì„œ ì‚¬ìš©í•´ë³´ë‹ˆ ëŠë‚Œì´ ìƒë‹¹íˆ ìƒˆë¡­ë‹¤!
í•˜ì§€ë§Œ ììœ ë„ê°€ ë†’ì€ ë§Œí¼, ë”ë”ìš± ì£¼ì˜í•´ì„œ ì‚¬ìš©í•´ì•¼í•  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.
(ì‹¬ì§€ì–´ ì•„ì§ ë² íƒ€ì¸ ê¸°ëŠ¥ì´ê¸° ë•Œë¬¸ì—..)

![](7.jpg)

> ìš°ë¦¬ ëª¨ë‘ ì•ŒíŒŒ ê°œë°œì(?)ê°€ ë˜ëŠ” ê·¸ ë‚ ê¹Œì§€..  
> ì—¬íŠ¼ ì•ìœ¼ë¡œë„ í”„ë¡ íŠ¸ ì§„ì˜ì— ì–´ë– í•œ ë³€í™”ê°€ ì°¾ì•„ì˜¬ì§€ ê¸°ëŒ€ê°€ ë˜ë„¤ìš” :)

```toc
```